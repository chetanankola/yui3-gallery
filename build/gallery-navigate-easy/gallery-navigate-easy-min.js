YUI.add("gallery-navigate-easy",function(g){var c="down:39+shift",h="down:37+shift",e=true,f=false,b="transhighlight",a="containerhighlight",d=function(i){d.superclass.constructor.apply(this,arguments);};d.NAME="Navigation";d.ATTRS={activeRegistryIndex:{value:null},registry:[]};g.extend(d,g.Base,{container:{node:null,containerId:null,children:[],childIndexInFocus:-1},initializer:function(i){var j=this;g.one("body").on("key",function(k){j.makeNextContainerNavigable(e);},c);g.one("body").on("key",function(k){j.makeNextContainerNavigable(f);},h);this.makeNextContainerNavigable();},makeNextContainerNavigable:function(j){var i=this.get("registry"),k;if(i.length>0){k=this.getNextRegistryIndex(j);if(k!==null&&i[k]){var l=g.one(i[k].node);if(l){this.deactivateRegisteredContainer();this.registerContainer(l);this.initiateNavigation();}else{this.deactivateRegisteredContainer();}}}else{}},getNextRegistryIndex:function(k){var j=this.get("registry"),m,n=null;if(j&&j.length>0){var l=0;for(l=0;l<j.length;l++){m=j.length;n=this.get("activeRegistryIndex");if(n===null){n=0;}else{n=k?(n+1):(n-1);if(n>=m){n=0;}if(n<0){n=m-1;}}this.set("activeRegistryIndex",n);if(g.one(j[n].node)){return n;}else{}}return n;}return null;},registerContainer:function(i){if(i){this.updateChildren(i);}},updateChildren:function(l){var k=l.all("> *"),j=[],i=this.container;k.each(function(o,m,n){j[m]=o;});i.node=l;i.children=j;i.containerId=l.generateID();},initiateNavigation:function(){this.activateRegisteredContainer();},deactivateRegisteredContainer:function(){this.killAllSubscription();this.removeHighlightonContainer();this.removeHighlightonCurrentChild();this.resetContainer();},removeHighlightonContainer:function(){var i=this.container;if(i&&i.node){i.node.removeClass(a);}},removeHighlightonCurrentChild:function(){var i=this.container;var j=i.childIndexInFocus;if(j!==null&&j!==-1){i.children[j].removeClass(b);}},resetRegistryIndex:function(){this.set("activeRegistryIndex",null);},resetContainer:function(){this.container={node:null,containerId:null,children:[],childIndexInFocus:-1};this.wasLastChild=false;},killAllSubscription:function(){if(g.BodySubscr){this.detachAllSubscriptions();}},activateRegisteredContainer:function(){var i=this.container;if(i&&i.node){i.node.addClass(a);}g.BodySubscr={};g.BodySubscr.keydown=g.one("body").on("down",g.bind(this.onMyKeyDown,this));g.BodySubscr.keyup=g.one("body").on("up",g.bind(this.onMyKeyUp,this));g.one("body").simulate("keydown",{keyCode:40});},detachAllSubscriptions:function(){for(var i in g.BodySubscr){g.BodySubscr[i].detach();}delete g.BodySubscr;},onMyKeyDown:function(j){this.wasLastChild=false;if(this.container){j.preventDefault();var i=this.container,l=i.childIndexInFocus,k=this.getNextIndex(l);i.childIndexInFocus=k;this.bringChildtoFocus(i.children[k]);}},onMyKeyUp:function(j){if(this.container){j.preventDefault();var i=this.container,l=i.childIndexInFocus,k=this.getPreviousIndex(l);this.bringChildtoFocus(i.children[k]);i.childIndexInFocus=k;}},destructor:function(){delete this.anim;},animateScroll:function(i){this.anim=new g.Anim({node:"window",from:{scroll:[g.DOM.docScrollX(),g.DOM.docScrollY()]},to:{scroll:[g.DOM.docScrollX(),i]},duration:0.1,easing:g.Easing.easeNone}).run();},getNextIndex:function(k){var i=this.container,j=i.children.length;if(k!=-1){i.children[k].removeClass(b);}if(k===j-1){k=-1;this.wasLastChild=true;}else{this.wasLastChild=false;}k++;return k;},getPreviousIndex:function(k){var i=this.container,j=i.children.length;if(k>=0){i.children[k].removeClass(b);}if(k===0){k=j;}k--;if(k<0){k=0;}return k;},scrollToCenter:function(k){var m=k.getY(),i=k.get("clientHeight"),n=i/2,j=k.get("winHeight");if(i>j){n=0;}var l=j/2;if(m>l){if(this.anim&&this.anim.get("running")){this.anim.pause();}return m-l+n;}},bringChildtoFocus:function(k){var i=k.all("> a");i.each(function(n,l,m){n.focus();});k.addClass(b).focus();if(this.anim&&this.anim.get("running")){this.anim.pause();}if(this.wasLastChild){k.scrollIntoView();}if(this.container.childIndexInFocus===0){k.scrollIntoView();}var j=this.scrollToCenter(k);this.animateScroll(j);}});g.Nav=d;},"@VERSION@",{requires:["node","event","event-key","gallery-event-nav-keys","base","anim","node-event-simulate"],skinnable:false});