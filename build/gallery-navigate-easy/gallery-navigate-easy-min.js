YUI.add("gallery-navigate-easy",function(c){var g="down:39+shift",e="down:37+shift",b="down:68+shift",h="down:69+shift",d=true,j=false,f="transhighlight",i="containerhighlight",a=function(k){a.superclass.constructor.apply(this,arguments);};a.NAME="Navigation";a.ATTRS={activeRegistryIndex:{value:null},registry:[]};c.extend(a,c.Base,{container:{node:null,containerId:null,children:[],childIndexInFocus:-1,activeLink:null},initializer:function(k){var l=this;this.activateContainerNavigation();this.makeNextContainerNavigable();c.one("body").on("key",function(m){l.deactivateAllNavigation();},b);c.one("body").on("key",function(m){if(l.activateContainerNavigation()){l.makeNextContainerNavigable(d);}},h);},activateContainerNavigation:function(){var k=this;if(c.ContainerSubscr){return false;}else{c.ContainerSubscr={};}c.ContainerSubscr.next=c.one("body").on("key",function(l){k.makeNextContainerNavigable(d);},g);c.ContainerSubscr.prev=c.one("body").on("key",function(l){k.makeNextContainerNavigable(j);},e);return true;},deactivateAllNavigation:function(){this.deactivateRegisteredContainer();this.deactivateContainerNavigation();},deactivateContainerNavigation:function(){if(c.ContainerSubscr){for(var k in c.ContainerSubscr){c.ContainerSubscr[k].detach();}delete c.ContainerSubscr;}},makeNextContainerNavigable:function(l){var k=this.get("registry"),m;if(k.length>0){m=this.getNextRegistryIndex(l);if(m!==null&&k[m]){var n=c.one(k[m].node);if(n){this.deactivateRegisteredContainer();this.registerContainer(n);this.initiateNavigation();}else{this.deactivateRegisteredContainer();}}}else{}},getNextRegistryIndex:function(l){var k=this.get("registry"),n,o=null;if(k&&k.length>0){var m=0;for(m=0;m<k.length;m++){n=k.length;o=this.get("activeRegistryIndex");if(o===null){o=0;}else{o=l?(o+1):(o-1);if(o>=n){o=0;}if(o<0){o=n-1;}}this.set("activeRegistryIndex",o);if(c.one(k[o].node)){return o;}else{}}return o;}return null;},registerContainer:function(k){if(k){this.updateChildren(k);}},updateChildren:function(n){var m=n.all("> *"),l=[],k=this.container;m.each(function(q,o,p){l[o]=q;});k.node=n;k.children=l;k.containerId=n.generateID();},initiateNavigation:function(){this.activateRegisteredContainer();},deactivateRegisteredContainer:function(){this.killAllChildNavigationSubscription();this.removeHighlightonContainer();this.removeHighlightonCurrentChild();this.resetContainer();},removeHighlightonContainer:function(){var k=this.container;if(k&&k.node){k.node.removeClass(i);}},removeHighlightonCurrentChild:function(){var k=this.container;var l=k.childIndexInFocus;if(l!==null&&l!==-1){k.children[l].removeClass(f);}},resetRegistryIndex:function(){this.set("activeRegistryIndex",null);},resetContainer:function(){this.container={node:null,containerId:null,children:[],childIndexInFocus:-1};this.wasLastChild=false;},killAllChildNavigationSubscription:function(){if(c.BodySubscr){this.detachAllChildSubscriptions();}},activateRegisteredContainer:function(){var k=this.container;if(k&&k.node){k.node.addClass(i);}c.BodySubscr={};c.BodySubscr.keydown=c.one("body").on("down",c.bind(this.onMyKeyDown,this));c.BodySubscr.keyup=c.one("body").on("up",c.bind(this.onMyKeyUp,this));c.one("body").simulate("keydown",{keyCode:40});},detachAllChildSubscriptions:function(){for(var k in c.BodySubscr){c.BodySubscr[k].detach();}delete c.BodySubscr;},onMyKeyDown:function(l){this.wasLastChild=false;if(this.container){l.preventDefault();var k=this.container,n=k.childIndexInFocus,m=this.getNextIndex(n);k.childIndexInFocus=m;this.bringChildtoFocus(k.children[m]);}},onMyKeyUp:function(l){if(this.container){l.preventDefault();var k=this.container,n=k.childIndexInFocus,m=this.getPreviousIndex(n);this.bringChildtoFocus(k.children[m]);k.childIndexInFocus=m;}},destructor:function(){delete this.anim;},animateScroll:function(k){this.anim=new c.Anim({node:"window",from:{scroll:[c.DOM.docScrollX(),c.DOM.docScrollY()]},to:{scroll:[c.DOM.docScrollX(),k]},duration:0.1,easing:c.Easing.easeNone}).run();},getNextIndex:function(m){var k=this.container,l=k.children.length;if(m!=-1){k.children[m].removeClass(f);}if(m===l-1){m=-1;this.wasLastChild=true;}else{this.wasLastChild=false;}m++;return m;},getPreviousIndex:function(m){var k=this.container,l=k.children.length;if(m>=0){k.children[m].removeClass(f);}if(m===0){m=l;}m--;if(m<0){m=0;}return m;},scrollToCenter:function(m){var o=m.getY(),k=m.get("clientHeight"),p=k/2,l=m.get("winHeight");if(k>l){p=0;}var n=l/2;if(o>n){if(this.anim&&this.anim.get("running")){this.anim.pause();}return o-n+p;}},bringChildtoFocus:function(m){var k=m.all("a");if(this.activeLink){this.activeLink.blur();}var n=[];k.each(function(q,o,p){n[o]=q;});if(n[0]){n[0].focus();this.activeLink=n[0];}m.addClass(f).focus();if(this.anim&&this.anim.get("running")){this.anim.pause();}if(this.wasLastChild){m.scrollIntoView();}if(this.container.childIndexInFocus===0){m.scrollIntoView();}var l=this.scrollToCenter(m);this.animateScroll(l);}});c.Nav=a;},"@VERSION@",{requires:["node","event","event-key","gallery-event-nav-keys","base","anim","node-event-simulate"],skinnable:false});