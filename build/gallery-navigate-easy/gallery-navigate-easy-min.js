YUI.add("gallery-navigate-easy",function(c){var g="down:39+shift",e="down:37+shift",b="down:68+shift",h="down:69+shift",d=true,j=false,f="transhighlight",i="containerhighlight",a=function(k){a.superclass.constructor.apply(this,arguments);};a.NAME="Navigation";a.ATTRS={activeRegistryIndex:{value:null},registry:[],debug:{value:null}};c.extend(a,c.Base,{container:{node:null,containerId:null,children:[],childIndexInFocus:-1,activeLink:null,isHorizontal:false},initializer:function(k){var l=this;this.reorderRegistryByRank();this.activateContainerNavigation();this.makeNextContainerNavigable();c.one("body").on("key",function(m){l.deactivateAllNavigation();},b);c.one("body").on("key",function(m){if(l.activateContainerNavigation()){l.makeNextContainerNavigable(d);}},h);},register:function(l){var n=l||{},m=n.node,k=this.get("registry");if(c.one(m)){k[k.length]=n;this.reorderRegistryByRank();}else{}},deRegister:function(m){var p=m||{},o=p.node,k=this.get("registry"),n=c.one(o),l=null;if(n){l=this.isNodeInRegistry(o);if(l!==null){k.splice(l,1);this.reorderRegistryByRank();}else{}}else{}},isNodeInRegistry:function(n){var m=0,l=this.get("registry"),k=l.length;for(m=0;m<k;m++){if(n===l[m].node){return m;}}return null;},reorderRegistryByRank:function(){var l=this.get("registry"),k=l.length,o=[],p,m,n;for(n=0;n<k;n++){o[n]=null;if(l[n].rank===undefined){l[n].rank=null;}}for(n=0;n<k;n++){p=l[n].rank;if(p&&p>0&&p<=k){if(o[p-1]!==null){l[n].rank=null;}else{o[p-1]=l[n];}}}m=0;for(n=0;n<k;n++){p=l[n].rank;if(p===null||p<=0||p>k){while(o[m]!==null){m++;}o[m]=l[n];o[m].rank=m+1;}}this.set("registry",o);},activateContainerNavigation:function(){var k=this;if(c.ContainerSubscr){return false;}else{c.ContainerSubscr={};}c.ContainerSubscr.next=c.one("body").on("key",function(l){k.makeNextContainerNavigable(d);},g);c.ContainerSubscr.prev=c.one("body").on("key",function(l){k.makeNextContainerNavigable(j);},e);return true;},deactivateAllNavigation:function(){this.deactivateRegisteredContainer();this.deactivateContainerNavigation();},deactivateContainerNavigation:function(){var l,k=c.ContainerSubscr;if(k){for(l in k){if(k.hasOwnProperty(l)){k[l].detach();}}delete c.ContainerSubscr;}else{}this.set("activeRegistryIndex",null);},makeNextContainerNavigable:function(l){var k=this.get("registry"),m,n,o=false;if(k.length>0){m=this.getNextRegistryIndex(l);if(m!==null&&k[m]){n=c.one(k[m].node);if(n){o=k[m].isHorizontal||false;this.deactivateRegisteredContainer();this.registerContainer(n,(m+1),o);this.initiateNavigation();}else{this.deactivateRegisteredContainer();}}}else{}},getNextRegistryIndex:function(l){var k=this.get("registry"),n,o=null,m=0;if(k&&k.length>0){for(m=0;m<k.length;m++){n=k.length;o=this.get("activeRegistryIndex");if(o===null){o=0;}else{o=l?(o+1):(o-1);if(o>=n){o=0;}if(o<0){o=n-1;}}this.set("activeRegistryIndex",o);if(c.one(k[o].node)){return o;}else{}}return o;}return null;},registerContainer:function(k,m,l){if(k){this.updateChildren(k,m,l);}else{}},updateChildren:function(n,p,o){var m=n.all("> *"),l=[],k=this.container;m.each(function(s,q,r){l[q]=s;});k.isHorizontal=o||false;k.rank=p;k.node=n;k.children=l;k.containerId=n.generateID();},initiateNavigation:function(){this.activateRegisteredContainer();},deactivateRegisteredContainer:function(){this.killAllChildNavigationSubscription();this.removeHighlightonContainer();this.removeHighlightonCurrentChild();this.resetContainer();},removeHighlightonContainer:function(){var k=this.container;if(k&&k.node){k.node.removeClass(i);}},removeHighlightonCurrentChild:function(){var k=this.container,l=k.childIndexInFocus;if(l!==null&&l!==-1){k.children[l].removeClass(f);}},resetRegistryIndex:function(){this.set("activeRegistryIndex",null);},resetContainer:function(){this.container={rank:null,node:null,containerId:null,children:[],childIndexInFocus:-1,isHorizontal:false};this.wasLastChild=false;},killAllChildNavigationSubscription:function(){if(c.BodySubscr){this.detachAllChildSubscriptions();}},splash:function(p,l){var n='<h1 style="font-size:3em;color:#444;position:absolute;-webkit-transform: rotate(-30deg);" id="_splash">'+p+"</h1>",o,k,m;l[0]=l[0]-50;l[1]=l[1]-50;o=c.one("#_splash");k=c.one("body");if(o){o.remove();}m=c.DOM.create(n);k.append(m);o=c.one("#_splash").setXY(l).addClass("cramDownOpacity");},activateRegisteredContainer:function(){var k=this.container,l;if(k&&k.node){k.node.addClass(i);if(this.get("debug")){l=k.node.getXY();this.splash("Rank:"+k.rank+"<br>id:"+k.node.generateID()+"<br>isHorizontal:"+k.isHorizontal,l);}}c.BodySubscr={};if(k.isHorizontal){c.BodySubscr.keyright=c.one("body").on("right",c.bind(this.onMyKeyDown,this));c.BodySubscr.keyleft=c.one("body").on("left",c.bind(this.onMyKeyUp,this));c.one("body").simulate("keydown",{keyCode:39});}else{c.BodySubscr.keydown=c.one("body").on("down",c.bind(this.onMyKeyDown,this));c.BodySubscr.keyup=c.one("body").on("up",c.bind(this.onMyKeyUp,this));c.one("body").simulate("keydown",{keyCode:40});}},detachAllChildSubscriptions:function(){var k=c.BodySubscr,l;if(k){for(l in k){if(k.hasOwnProperty(l)){k[l].detach();}}delete c.BodySubscr;}},onMyKeyDown:function(l){var k=this.container,n,m;this.wasLastChild=false;if(k){l.preventDefault();n=k.childIndexInFocus;m=this.getNextIndex(n);k.childIndexInFocus=m;this.bringChildtoFocus(k.children[m]);}else{}},onMyKeyUp:function(l){var k=this.container,n,m;if(k){l.preventDefault();n=k.childIndexInFocus;m=this.getPreviousIndex(n);this.bringChildtoFocus(k.children[m]);k.childIndexInFocus=m;}else{}},destructor:function(){delete this.anim;},animateScroll:function(k){this.anim=new c.Anim({node:"window",from:{scroll:[c.DOM.docScrollX(),c.DOM.docScrollY()]},to:{scroll:[c.DOM.docScrollX(),k]},duration:0.2,easing:c.Easing.easeNone}).run();},getNextIndex:function(m){var k=this.container,l=k.children.length;if(m!=-1){k.children[m].removeClass(f);}if(m===l-1){m=-1;this.wasLastChild=true;}else{this.wasLastChild=false;}m++;return m;},getPreviousIndex:function(m){var k=this.container,l=k.children.length;
if(m>=0){k.children[m].removeClass(f);}if(m===0){m=l;}m--;if(m<0){m=0;}return m;},scrollToCenter:function(m){var o=m.getY(),k=m.get("clientHeight"),p=k/2,l=m.get("winHeight"),n=l/2;if(k>l){p=0;}if(o>n){if(this.anim&&this.anim.get("running")){this.anim.pause();}return o-n+p;}else{}return 0;},bringChildtoFocus:function(m){var k=m.all("a"),n=[],l;m.addClass(f).focus();if(this.activeLink){this.activeLink.blur();}k.each(function(q,o,p){n[o]=q;});if(n[0]){n[0].focus();this.activeLink=n[0];}if(this.anim&&this.anim.get("running")){this.anim.pause();}if(this.wasLastChild){m.scrollIntoView();}if(this.container.childIndexInFocus===0){m.scrollIntoView();}l=this.scrollToCenter(m);this.animateScroll(l);}});c.Nav=a;},"@VERSION@",{requires:["node","event","event-key","gallery-event-nav-keys","base","anim","node-event-simulate"],skinnable:false});